<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="The online musing of Brendon Murphy" name="description" />
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link href="/css/pygment_trac.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/atom+xml" title="Brendon Murphy - Atom" href="http://feeds.feedburner.com/techfreaknet" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <title>Brendon Murphy &ndash; techfreak.net</title>
  </head>
  <body>
    <nav>
      <header>
        <h1>
          <a href="/"><span>Brendon Murphy</span>
          Techfreak.net</a>
        </h1>
        </header>
        <ul data-selected="/index.html">
          <li><h3><a href="/">Blog</a></h3></li>
          <li><h3><a href="/archive.html">Archives</a></h3></li>
          <li><h3><a href="/about.html">About</a></h3></li>
          <li><h3><a href="http://feeds.feedburner.com/Techfreaknet" rel="alternate" type="application/rss+xml">Feed</a></h3></li>
          <li><h3><a href="http://github.com/bemurphy" rel="external">Github</a></h3></li>
          <li><h3><a href="http://twitter.com/xternal" rel="external">Twitter</a></h3></li>
        </ul>
        <script type="text/javascript">
          if ($('nav a[href="/index.html"]').length) {
            $('nav a[href="/index.html"]').closest('li').addClass("selected");
          } else {
            $('nav li').first().addClass("selected");
          }
        </script>
      <section class="sell"></section>
    </nav>

    <section id="content">
      
<div class="post">  

  <h1>
    Two Support Objects You May Have Missed
  </h1>

  <p>If you spend time daily in a large ruby project (such as a Rails app) that has ActiveSupport pulled in, you are likely relying on its string, time, hash, and other extensions.  I&#8217;ve found two objects it provides prove useful, and having found them lesser known amongst my coding friends, figured they are worth sharing.</p>
<p>The first useful tidbit is the <a href="http://api.rubyonrails.org/classes/ActiveSupport/StringInquirer.html">ActiveSupport::StringInquirer</a> class.  It&#8217;s a <a href="https://github.com/rails/rails/blob/ef53d915164da7f757d03c4a70fe38e374c08b14/activesupport/lib/active_support/string_inquirer.rb#L13">simple method missing call</a> that lets you do prettier equality tests on strings.  If you&#8217;ve ever done a <em class="code">Rails.env.development?</em> check, it uses this implementation.  Let&#8217;s go to the code:</p>
<div class="highlight"><pre><code class="ruby"><span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">development?</span> <span class="c1"># =&gt; true</span>
<span class="no">Rails</span><span class="o">.</span><span class="n">env</span>              <span class="c1"># =&gt; &quot;development&quot;</span>
<span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">class</span>        <span class="c1"># =&gt; ActiveSupport::StringInquirer</span>

<span class="n">si</span> <span class="o">=</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">StringInquirer</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="n">si</span><span class="o">.</span><span class="n">foo?</span> <span class="c1"># =&gt; true</span>
<span class="n">si</span><span class="o">.</span><span class="n">bar?</span> <span class="c1"># =&gt; false</span>
</code></pre>
</div><p>I think this is great for two reasons.  First, it&#8217;s a more expressive use of code, and secondly, it implies less coupling to a string outside of an object.  Let&#8217;s take a simple example: a role for a User object.  Imagine you start simple, where role is just a string.  Now let&#8217;s say we&#8217;re using <a href="https://github.com/ryanb/cancan">CanCan</a> to add simple authorization to our app, with an ability class that looks like this:</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Ability</span>
  <span class="kp">include</span> <span class="no">CanCan</span><span class="o">::</span><span class="no">Ability</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">user</span> <span class="o">||</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span>

    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;admin&quot;</span>
      <span class="n">can</span> <span class="ss">:manage</span><span class="p">,</span> <span class="ss">:all</span>
    <span class="k">else</span>
      <span class="n">can</span> <span class="ss">:read</span><span class="p">,</span> <span class="ss">:all</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div><p>Note we&#8217;re doing an <em class="code">#==</em> for comparison on that role.  This is a bit ugly and not as expressive as I&#8217;d like.  Let&#8217;s get rid of ugly with the help of the StringInquirer.</p>
<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="k">def</span> <span class="nf">role</span>
    <span class="n">role</span> <span class="o">=</span> <span class="n">read_attribute</span><span class="p">(</span><span class="ss">:role</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span>
    <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">StringInquirer</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">role</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Ability</span>
  <span class="kp">include</span> <span class="no">CanCan</span><span class="o">::</span><span class="no">Ability</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span> <span class="o">||</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span>

    <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">admin?</span>
      <span class="n">can</span> <span class="ss">:manage</span><span class="p">,</span> <span class="ss">:all</span>
    <span class="k">else</span>
      <span class="n">can</span> <span class="ss">:read</span><span class="p">,</span> <span class="ss">:all</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">role</span>
    <span class="vi">@user</span><span class="o">.</span><span class="n">role</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div><p>I&#8217;ve redefined <em class="code">User#role</em> to wrap the attribute in a StringInquirer, and updated the Ability class to call the role with the predicate <em class="code">#admin?</em> method. Our end behavior for ability checking is the same, but I think we&#8217;ve got more readable code.  There&#8217;s another win on this: we&#8217;ve decoupled from treating our role like a string which can pay out nicely in the future.  Imagine for instance the day arrives when a user no longer has one role, but many.  A simple user may be able to function as both a forum moderator or a comment moderator.  You can shift to supporting <a href="https://github.com/ryanb/cancan/wiki/Role-Based-Authorization">many roles per user</a> with a bitmask method and leave your external calls untouched.  A simple application of <em class="code">define_method</em> or <em class="code">method_missing</em> on your role attribute wrapper is all you need to keep rolling.  Now, you could also define <em class="code">#==</em> on your role object for such string comparisons, but comparing to a string reads more like the caller knows too much of an implementation detail.  I haven&#8217;t touched on the <em class="code">User#role=</em> setter here;  you may need some sanitizing and cleanup on it if you were assigning it the results from the getter method anywhere (and, ahem, possibly breaking encapsulation with your own string assignments, too).  I&#8217;ll leave that as an exercise for the reader.</p>
<p>Our second friend is the <a href="http://rails.rubyonrails.org/classes/ActiveSupport/SecureRandom.html">ActiveSupport::SecureRandom</a> interface.  Actually, saying this is from ActiveSupport is a little misleading.  If you are working on an older Rails 2 project, you&#8217;ll probably be using this by way of ActiveSupport.  However for modern and future use, this is deprecated and delegated to Ruby 1.9.x <a href="http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom">stdlib&#8217;s SecureRandom</a>.  SecureRandom is great for generating random character strings on the fly that are useful as <span class="caps">API</span> keys, temporary passwords, tokens, etc.  It&#8217;s simple to use, and can replace those naive calls to <em class="code">rand()</em> you&#8217;ve been making for generating random strings.  Don&#8217;t reinvent the wheel!  I&#8217;ll leave you with a few examples:</p>
<div class="highlight"><pre><code class="ruby"><span class="no">SecureRandom</span><span class="o">.</span><span class="n">hex</span>    <span class="c1"># =&gt; ace59c788b498fadcaa88216e45cf800</span>
<span class="no">SecureRandom</span><span class="o">.</span><span class="n">base64</span> <span class="c1"># =&gt; iJKR2NQ8Jk1wBdp0nU/fhA==</span>

<span class="c1"># Optionally pass 5 for 5 hex pairs</span>
<span class="no">SecureRandom</span><span class="o">.</span><span class="n">hex</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># =&gt; a5f8bf212f</span>
</code></pre>
</div>  
  
  <p class="signoff">
    &mdash;<a href="/2011/10/16/two-support-objects-you-may-have-missed.html">Oct 16, 2011</a>
  </p>

  <p class="index_comments_count"><a href="/2011/10/16/two-support-objects-you-may-have-missed.html#disqus_thread">/2011/10/16/two-support-objects-you-may-have-missed.html comments</a></p>
  </div>

<div class="post">  

  <h1>
    Spec your codebase, not just your code
  </h1>

  <p>Many rubyists are familiar with using Test::Unit, RSpec, or MiniTest for specifying the behavior of their application code.  Over the past year, I&#8217;ve discovered a novel and less conventional use of testing tools I like to call &#8220;specifying the codebase&#8221;.  Let me show you what I mean.</p>
<p>If you&#8217;ve ever worked on a sizeable Rails project, you&#8217;ve probably experienced some codebase quirks at some point.  For example, I&#8217;ve got an application that had issues when the <a href="http://liquidmarkup.org/">Liquid Templating engine</a> was loaded as a gem.  The fix was to include a specific version as a plugin.  While it&#8217;s usually best to get to the root of the problem, sometimes it&#8217;s not feasible or expedient and such measures must suffice.  Once Liquid was included as a gem, we noticed some failing tests, and then pieced together that, oops, Liquid had been reconfigured as a gem.  A code review may have caught this, or perhaps not, since it&#8217;s a little quirky.  Now the second time we made the mistake, it dawned on me, write a spec to send up a red flag and make it easier to spot the immediate problem when tests fail in the future:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">describe</span> <span class="s2">&quot;The codebase&quot;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s2">&quot;doesn&#39;t load the liquid gem&quot;</span> <span class="k">do</span>
    <span class="no">Gem</span><span class="o">.</span><span class="n">loaded_specs</span><span class="o">.</span><span class="n">any?</span> <span class="p">{</span><span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">s</span><span class="o">.</span><span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;liquid&quot;</span><span class="p">}</span><span class="o">.</span><span class="n">should</span> <span class="n">be_false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div><p>It&#8217;s pretty easy to make the mistake of not properly compressing or optimizing assets, especially images, in your app&#8217;s public directory.  Code review or possibly even your vcs can help prevent such problems, but you can also let your specifications alert you to the problem:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">it</span> <span class="s2">&quot;/public directory includes files less than 1MB&quot;</span> <span class="k">do</span>
  <span class="n">files</span> <span class="o">=</span> <span class="sb">`find </span><span class="si">#{</span><span class="no">File</span><span class="o">.</span><span class="n">join</span> <span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;public&quot;</span><span class="si">}</span><span class="sb"> -type f -size +1M`</span>
  <span class="n">files</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sr">/\n/</span><span class="p">)</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="o">[]</span>
<span class="k">end</span>
</code></pre>
</div><p>The pattern emerging here is pretty simple:  if you or your teammates make any repeat mistakes with your codebase, write a spec to prevent further repeats.  By all means, make sure to communicate and talk out application guidelines, yet, nothing says &#8220;hey, over here!&#8221; like a failing test.</p>
<p>The applications here are pretty endless.  Maybe you&#8217;ve got a Sinatra app on Heroku where you precompile dynamic stylesheets, and have made the mistake of checking in a busted css one too many times;  there&#8217;s a spec for that!  Or perhaps you&#8217;ve got an overzealous teammate adding or removing crazy things from git file index.  First, do better code review and, secondly, there&#8217;s a spec for that:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">it</span> <span class="s2">&quot;leaves config/database.yml out of the repository&quot;</span> <span class="k">do</span>
  <span class="n">git</span> <span class="o">=</span> <span class="no">Git</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
  <span class="n">git</span><span class="o">.</span><span class="n">ls_files</span><span class="p">(</span><span class="s2">&quot;config/database.yml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">should</span> <span class="n">be_empty</span>
<span class="k">end</span>
</code></pre>
</div><p>Finally, there&#8217;s some important safety notes for techniques like this.  First, you may find yourself using system commands like find or grep.  If you&#8217;re confident you&#8217;ve got a fairly consistent environment your application is developed and run on (i.e. *nix boxes) this is probably OK.  However, don&#8217;t trickle this practice over towards reusable code, like gems you write and share with the world.  It&#8217;s not kind to Windows users out there.  Secondly, tests like this are often going to integrate with a real filesystem, so for goodness sake stick to read only operations.   Don&#8217;t touch, rm, cp, or mv files about.  If you find yourself wanting to perform destructive operation, the rakefiles are that-a-way.  And again, don&#8217;t share this behavior with your application or gem code, but rather, use gems like <a href="https://github.com/defunkt/fakefs">FakeFS</a> for testing in isolation of the filesystem.</p>  
  
  <p class="signoff">
    &mdash;<a href="/2011/10/01/spec-your-codebase%2C-not-just-your-code.html">Oct 01, 2011</a>
  </p>

  <p class="index_comments_count"><a href="/2011/10/01/spec-your-codebase%2C-not-just-your-code.html#disqus_thread">/2011/10/01/spec-your-codebase%2C-not-just-your-code.html comments</a></p>
  </div>

<div class="post">  

  <h1>
    NotNot Alternative
  </h1>

  <p>There&#8217;s a common ruby convention out there, I call it NotNot.  You&#8217;ll find it often in predicate methods, and it looks like it sounds, &#8216;!!&#8217;.  I suppose you could call it &#8220;Bang Bang&#8221;, or perhaps it has a real name I&#8217;m not aware of.</p>
<p>I don&#8217;t like NotNot, primarily I think because in my head it seems like the dreaded English grammar double negative.  In other words, it&#8217;s just weird.</p>
<p>The point of the NotNot is for your classes to return true/false, rather than just truthy/falsy.  Let&#8217;s start with a simple example predicate:</p>
<script src="https://gist.github.com/1109678.js?file=first_example.rb"></script><p>What?  That looks kind of strange, however, it will pass conditional tests, since ruby treats the values nil and false both as falsy values, while other values as truthy.  But again, the returns look weird.  Enter the NotNot:</p>
<script src="https://gist.github.com/1109678.js?file=second_example.rb"></script><p>Hey, those returns looks better, I see we&#8217;re getting back real true/false which is really what we want.  But that NotNot looks weird.  Think about it in your head, what&#8217;s the value of not not false&#8230;uh.</p>
<p>Say hello to the TrueClass#&amp; method.  The <a href="http://www.ruby-doc.org/core/classes/TrueClass.html#M000564">TrueClass RDoc states</a> that the &amp; method &#8220;Returns false if obj is nil or false, true otherwise.&#8221;</p>
<script src="https://gist.github.com/1109678.js?file=third_example.rb"></script><p>You&#8217;ll note we&#8217;re still getting back true/false.  The method is less terse than the NotNot, but I think slightly a better match intuitively.</p>
<p>In the end, it really boils down to style and readability.  If you code Ruby, while it&#8217;s important to know the NotNot, I&#8217;d advise something your brain doesn&#8217;t have to double unroll.</p>
<p>Hat tip to my friend <a href="http://www.billpratt.net/">Bill</a> for taking me straight from example 1 to 3 when I started in Ruby.</p>  
  
  <p class="signoff">
    &mdash;<a href="/programming,/ruby/2011/07/27/notnot-alternative.html">Jul 27, 2011</a>
  </p>

  <p class="index_comments_count"><a href="/programming,/ruby/2011/07/27/notnot-alternative.html#disqus_thread">/programming,/ruby/2011/07/27/notnot-alternative.html comments</a></p>
  </div>

<div class="post">  

  <h1>
    Onward to Jekyll
  </h1>

  <p>In the grand tradition of getting bored with blogging software, without actually taking the time to blog, I&#8217;ve transitioned software yet again.  This time I selected <a href="http://github.com/mojombo/jekyll">Jekyll</a> to try.  I discovered that in the past I&#8217;ve had a habit of writing blog posts in TextMate or Vim, and then pasting them into whatever blog software I was using at the time.  That&#8217;s silly.  Now I can just edit in my editor of choice, have full <em>syntax aware</em> access to template and <span class="caps">CSS</span> documents without dealing with a nasty web interface, and have greater flexibility for throwing different pages up on the site.  With blog software, it&#8217;s often like pulling teeth when you want those pages that are more <span class="caps">CMS</span> than blog.  Not so with Jekyll.  It&#8217;s a template system that simply builds a static site out of layout and markup files (I&#8217;m using textile).  When you want that one-off page, all you have to do is drop it in.  There&#8217;s no requirement that it play nice with the rest of your site, it could truly be a one-off if you so desired.</p>
<p>Anyway, if you want some fun and simple software to test-drive, I&#8217;d recommend it.  Not that it&#8217;ll get me to post any more.  Or perhaps, it will.</p>  
  
  <p class="signoff">
    &mdash;<a href="/2010/09/08/onward-to-jekyll.html">Sep 08, 2010</a>
  </p>

  <p class="index_comments_count"><a href="/2010/09/08/onward-to-jekyll.html#disqus_thread">/2010/09/08/onward-to-jekyll.html comments</a></p>
  </div>

<div class="post">  

  <h1>
    Metaprogramming in Ruby: Part 1
  </h1>

  <p>I joked with a co-worker the other day that, sometimes I think I&#8217;m better at Ruby metaprogramming that straight ahead programming.  This is a serious exaggeration, and I don&#8217;t count myself as an expert at either.  However, it dawned on me that, I have a few friends that aren&#8217;t as exposed to metaprogramming concepts in Ruby, so, what better topic to share about.  Hopefully in the process, you&#8217;ll learn something new, and, I&#8217;ll become better at explaining Ruby concepts and sharing code.</p>
<p>Before I dive in with some introductory examples, a quick definition of metaprogramming is in order.  To quote <a href="http://en.wikipedia.org/wiki/Metaprogramming" title="Wikipedia">Wikipedia</a>, &#8220;Metaprogramming is the writing of computer programs that write or manipulate other programs (or themselves) as their data, or that do part of the work at compile time that would otherwise be done at runtime&#8221;.  If you use Rails (and, I know you do), metaprogramming enables things you already do on a daily basis, such as dynamic find_by methods in ActiveRecord, or plugins that dynamically get a class to include them (acts_as_list, acts_as_tree, etc).</p>
<p>In this writeup, I&#8217;ll start with two extremely basic metaprogramming concepts.  In fact, these might not even be considered true Ruby metaprogramming, but, I wanted to start with some simple ideas which you may not have been exposed to in Ruby 101.</p>
<p>The first concept to get down in Ruby is that, classes are objects like anything else.  In Ruby, this means you can open the class and modify it on the fly.  The practice is affectionately called monkey patching or duck punching.  Let&#8217;s look at a simple example:</p>
<script src="http://gist.github.com/222706.js"></script><p>You can see above, we&#8217;ve created a Foo class with a public instance method, bar.  Calling foo.bar, we&#8217;ll get the output we expect, &#8220;bar!&#8221;.  Next, we reopen the Foo class, and add a new public instance method, foobar.  Had we tried to use Foo#foobar before this, we&#8217;d get a NoMethodError exception, as expected.  However, having reopened and modified the class, we can call our new method.</p>
<p>The other demonstration I&#8217;d like to show is one way you can define methods on the fly.  This example is abstract and doesn&#8217;t represent a recommended use, it&#8217;s simply to prove the point.</p>
<script src="http://gist.github.com/222724.js"></script><p>Running this simple example, the first call to foo_two.bar will output &#8220;bar&#8221;.  However, once we call foo.cap_bar, the public instance method bar is changed.  Running it a second time will output &#8220;<span class="caps">BAR</span>!!!&#8221;.  A more common, rubyish way of defining methods at run time in Ruby is the use of <a href="http://ruby-doc.org/core/classes/Module.html#M001654" title="define_method">define_method</a>, which I&#8217;ll cover in a future post.</p>
<p>An important concept to keep in mind here is that, you aren&#8217;t modifying behavior solely on the foo or foo_two instances.  Instead, you are changing the behavior of any open instance of the Foo or FooTwo classes.  So in our FooTwo example, if you were to create a foo_too instance, calling foo_too.bar would run through the dynamically created method as well and output &#8220;<span class="caps">BAR</span>!!!&#8221;.  In future postings, we&#8217;ll see a different approach of opening instances and defining methods specific to that instance.</p>
<p>Hopefully this has whet your appetite a little, and, in the future, we can run through some more exciting examples of the metaprogramming facilities Ruby has to offer.</p>  
  
  <p class="signoff">
    &mdash;<a href="/2009/10/30/metaprogramming-in-ruby-part-1.html">Oct 30, 2009</a>
  </p>

  <p class="index_comments_count"><a href="/2009/10/30/metaprogramming-in-ruby-part-1.html#disqus_thread">/2009/10/30/metaprogramming-in-ruby-part-1.html comments</a></p>
  </div>


    </section>
    <footer id="footer">
      
      <link rel="stylesheet" href="http://www.google.com/cse/style/look/minimalist.css" type="text/css" />
      <style>
        .gsc-control-cse { padding-left: 0px; }
        .gsc-control-cse a:link, .gsc-control-cse a:hover { color: #336699; }
      </style>
    </footer>
    <script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-15226195-1");
pageTracker._trackPageview();
} catch(err) {}</script>

    <script src="http://twitterjs.googlecode.com/svn/trunk/src/twitter.min.js" type="text/javascript"></script>
<script>
  getTwitters('tweet', { 
    id: 'xternal', 
    count: 2, 
    enableLinks: true, 
    ignoreReplies: true, 
    clearContents: true,
    template: '"%text%" <a href="http://twitter.com/%user_screen_name%/statuses/%id%/"><span class="time">&ndash;%time%</span></a>'
  });  
</script>

    <script type="text/javascript">
//<[CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
		if(links[i].href.indexOf('#disqus_thread') >= 0) {
			query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
		}
	}
	document.write('<script type="text/javascript" src="http://disqus.com/forums/techfreak/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>

  </body>
</html>
